<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8">
  <title>Анализатор страниц</title>
  <link rel='stylesheet' href='/webjars/bootstrap/5.2.3/css/bootstrap.min.css'>
  <script src="/webjars/bootstrap/5.2.3/js/bootstrap.bundle.min.js"></script>
</head>

<body>
<nav class="navbar navbar-expand-lg navbar-dark navbar-light bg-dark">
  <div class="container-fluid">
    <a class="navbar-brand" href="#">Анализатор страниц</a>
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav" aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>
    <div class="collapse navbar-collapse" id="navbarNav">
      <ul class="navbar-nav">
        <li class="nav-item">
          <a class="nav-link active" aria-current="page" href="/">Главная</a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="/urls">Сайты</a>
        </li>
      </ul>
    </div>
  </div>
</nav>

<main>
  <div th:if="${session.flash != null}">
      <div class="alert alert-danger" role="alert">
        <span th:text="${session.flash}" bgcolor="red"> </span>
      </div>
  </div>

  <div class="container-xxl">
    <h1 th:text="'Сайт ' + ${session.url.getName()}">Сайт http://...</h1>
    <table class="table table-bordered">
      <tr>
        <th>ID</th>
        <th th:text="${session.url.getId()}">ID from Thymeleaf</th>
      </tr>
      <tr>
        <th>Имя</th>
        <th th:text="${session.url.getName()}">Name from Thymeleaf</th>
      </tr>
      <tr>
        <th>Дата создания</th>
        <th th:text="*{#temporals.format(session.url.getCreatedAt(), 'dd/MM/yy HH:mm')}">Creation Date from Thymeleaf</th>
      </tr>
    </table>
  </div>

  <div class="container-xxl">
    <h1 th:text="Проверки">Проверки</h1>
    <form method="post" th:action="'/urls/' + ${session.url.getId()} + '/checks'">
      <button type="submit" class="h-100 btn btn-lg btn-primary mb-2">Запустить проверку</button>
    </form>
    <table class="table table-bordered">
      <thead>
      <tr>
        <th>ID</th>
        <th>Код ответа</th>
        <th>title</th>
        <th>h1</th>
        <th>description</th>
        <th>Дата проверки</th>
      </tr>
      </thead>
      <tr th:each="urlCheck : ${session.url.getUrlChecks()}">
        <td th:text="${urlCheck.id}">def id</td>
        <td th:text="${urlCheck.statusCode}">def status code</td>
        <td th:text="${urlCheck.title}">def title</td>
        <td th:text="${urlCheck.h1}">def h1</td>
        <td th:text="${urlCheck.description}">def description</td>
        <td th:text="*{#temporals.format(urlCheck.getCreatedAt(), 'dd/MM/yy HH:mm')}">def last checked</td>
      </tr>
    </table>
  </div>

</main>

</body>
</html>